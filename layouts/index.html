<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overworld Records</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Anton&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    {{ $styles := resources.Get "css/global.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $styles.Permalink }}">
</head>

<body>
    {{ partial "navbar.html" . }}
    <div id="content" style="margin-top: 2rem;">
        <div id="primary">
            <div id="main">
                <div>
                    <h2>Overworld Records Artists</h2>
                    <br />
                    <span class="scrollable-flex-span">
                        {{ $artistList := slice }} <!-- Create an empty slice to store artist data -->

                        <!-- Use .Pages to get the content files for artists -->
                        {{ range .Site.Pages }}
                        {{ if and (eq .Type "artists") (or .Params.name .Params.photo) }}
                        <!-- Ensure the artist has a name or photo -->
                        {{ $numSongs := 0 }} <!-- Initialize $numSongs to 0 by default -->
                        {{ if .Params.songs }} <!-- Ensure .songs exists -->
                        {{ $numSongs = len .Params.songs }} <!-- Count number of songs from frontmatter -->
                        {{ end }}
                        {{ $artistList = $artistList | append (dict "name" .Params.name "photo" .Params.photo "numSongs"
                        $numSongs) }}
                        {{ end }}
                        {{ end }}

                        <!-- Sort artists by number of songs (descending order) -->
                        {{ $sortedArtists := sort $artistList "numSongs" "desc" }}

                        <!-- Display artists -->
                        {{ range $sortedArtists }}
                        <div class="artist">
                            <a href="/artists/{{ .name | urlize }}" target="_blank">
                                <img src="{{ .photo }}" alt="Photo of {{ .name }}" width="155" height="155">
                                <p>{{ .name }}</p>
                            </a>
                        </div>
                        {{ end }}
                    </span>
                </div>
                <div class="hr"></div>
                <div>
                    <h2>Random Memes</h2>
                    <br />
                    <span class="scrollable-flex-span">
                        {{ $memes := readDir "static/images/memes" }}
                        {{ $shuffledMemes := shuffle $memes }} <!-- Shuffle images -->
                        {{ $selectedMemes := first 5 $shuffledMemes }} <!-- Pick first 5 -->

                        {{ range $selectedMemes }}
                        {{ if not .IsDir }} <!-- Ensure it's a file -->
                        {{ $imagePath := printf "/images/memes/%s" .Name }} <!-- Construct path -->
                        {{ $displayName := .Name | replaceRE "\\..*$" "" | replaceRE "-" " " }}
                        <!-- Remove extension & replace hyphens -->

                        <div class="meme">
                            <a href="{{ $imagePath }}" target="_blank">
                                <img src="{{ $imagePath }}" alt="{{ $displayName }}" width="200">
                                <p style="opacity: .75;">{{ $displayName | truncate 25 }}</p>
                            </a>
                        </div>
                        {{ end }}
                        {{ end }}

                        <a href="/memes" target="_blank"
                            style="opacity: .35; margin: auto 0; transform: translateY(-1ch);">See
                            more</a>
                    </span>
                </div>
                <div class="hr"></div>
                <div>
                    <h2>Recent Blogs</h2>
                    <br />
                    <span class="scrollable-flex-span">
                        {{ $latestBlog := index (sort (where .Site.RegularPages "Section" "blogs") "File.BaseFileName"
                        "desc") 0 }}

                        {{ if $latestBlog }}
                        <div class="latest-blog">
                            <h2>{{ $latestBlog.Params.title }}</h2>
                            <p><strong>Released:</strong> {{ $latestBlog.Params.released }}</p>
                            <p>{{ $latestBlog.Content }}</p>
                            <a href="{{ $latestBlog.RelPermalink }}">Read More</a>
                        </div>
                        {{ end }}

                    </span>
                </div>
            </div>
            <div id="sidebar">
                <button id="foenem-btn">
                    <p>FOENEM</p>
                </button>
                <div id="adspace">
                    <p>Your AD here, <strong>ON GANG!!!!</strong></p>
                    <p>24 diamonds fo' <strong>7 days!!!!!!</strong></p>
                    <br />
                    <p>min width <strong>208 pixels!!!!!</strong></p>
                    <p>no height limit, but<br />keep it <strong>reasonable!!!!!</strong></p>
                    <br />
                    <br />
                    <p>contact <strong>sando</strong> or <strong>medi!!!!!</strong></p>
                </div>
            </div>
        </div>
    </div>
    <style>
        .scrollable-flex-span {
            display: inline-flex;
            width: 100%;
            gap: 1rem;
        }

        .artist {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: .5rem;
            width: min-content;
            text-align: center;
            font-size: .9rem;
        }

        .artist img {
            border-radius: 100%;
        }

        .artist a p:hover {
            filter: brightness(150%);
        }

        #primary {
            display: inline-flex;
            width: 100%;
        }

        #content #main {
            flex-grow: 1;
            border-right: 1px solid rgb(70, 70, 70);
            padding-right: 2rem;
        }

        #content #sidebar {
            min-width: 15rem;
            max-width: 15rem;
            padding-left: 2rem;
            word-break: break-all;
            word-wrap: break-word;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        #foenem-btn {
            width: 100%;
            margin: .25rem;
            border: 2px solid black;
            border-radius: 8px;
            background: linear-gradient(to bottom, #c2ffc2 2%, #66ff66 30%, #008000 50%);
            cursor: pointer;

        }

        #foenem-btn p {
            font-family: "Anton", serif;
            padding: 0 0.5rem;
            font-size: 3rem;
            transform: scaleX(125%);
            font-weight: bold;
            color: white;
            background: linear-gradient(to bottom, #fff 55%, #acacac 40%);
            filter: drop-shadow(0 0 0.25rem black);
            -webkit-text-fill-color: transparent;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-stroke: 1px #000;
        }

        #foenem-btn:active {
            background: linear-gradient(to top, #c2ffc2 1%, #66ff66 40%, #008000 50%);
            transform: scale(.98);
        }

        #foenem-btn:active p {
            background: linear-gradient(to top, #fff 55%, #acacac 40%);
            filter: drop-shadow(0 0 0.25rem black);
            -webkit-text-fill-color: transparent;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-stroke: 1px #000;
        }

        #adspace {
            width: 100%;
            height: 400px;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: .5rem;
            justify-content: center;
            background-color: black;
            background-image: url("/images/ad.png");
            background-repeat: no-repeat;
            background-size: contain;
        }
    </style>

    <script>
        document.getElementById("foenem-btn").addEventListener("click", (e) => {
            const a = new Audio("/audio/onfoenemgrave.mp3");
            a.play();
            a.remove();
        });
    </script>
</body>

</html>